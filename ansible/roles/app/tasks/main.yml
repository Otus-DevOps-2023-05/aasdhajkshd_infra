---
- name: Get Service Status
  ansible.builtin.service_facts:
    services:
      name: puma
  register: service_status
  ignore_errors: true
- name: Display Service Status
  ansible.builtin.debug:
    var: service_status
- name: Add config for DB connection
  ansible.builtin.template:
    src: db.conf.j2
    dest: /home/ubuntu/db_config
    owner: ubuntu
    mode: "0644"
- name: Enable puma
  become: true
  ansible.builtin.systemd:
    enabled: true
    name: puma
  notify: Reload puma
- name: Show info about the env this host belongs to
  ansible.builtin.debug:
    msg: "This host is in {{ env }} environment!!!"
